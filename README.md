# Tietokantasovelluksen esittelysivu

Yleisiä linkkejä:

* [Linkki sovellukseeni](http://mitiaine.users.cs.helsinki.fi/tsoha/)
* [Linkki dokumentaatiooni](https://github.com/Mahtis/Tsoha-Bootstrap/blob/master/doc/dokumentaatio.pdf)

## Työn aihe

Työn aiheena on tehdä koehenkilöaikojen hallintajärjestelmä kokeellisen psykologian tutkimuksia varten. Sovelluksen käyttäjät voivat luoda kokeita, joihin he lisäävät varattavia aikoja. Kun koe on luotu ja siihen liitetty varattavia aikoja, käyttäjä voi jakaa kokeeseen liittyvää linkkiä, jonka kautta kiinnostuneet voivat varata vapaina olevia tutkimusaikoja.

## Kirjautuminen

Sovellukseen voi kirjautua tunnuksella teppo ja salasanalla teppo.

## Sovelluksen käyttöohjeet

Ilman kirjautumista sovelluksessa voi etusivun kautta selata käynnissä olevia kokeita ja sitä kautta ilmoittautua kokeisiin. Etusivulla kokeen perässä näkyy, kuinka monta kokeen paikoista on varattu. Kun koe on saavuttanut tavoitemäärän varauksia, se poistetaan etusivun näkymästä, sekä kokeen varaussivulta poistetaan kaikki time slotit (lisätään ilmoitus, että koe on täynnä).

Kirjautumaan pääsee oikean yläkulman Researcher login -napista. Tämän jälkeen sovellus ohjaa käyttäjän omalle käyttäjäsivulleen. Käyttäjäsivulla on listattuna kaikki käyttäjän kokeet, sekä kaikki tulevat varaukset (nykyisestä päivästä eteenpäin). Koetta klikkaamalla pääsee koesivulle, jossa näkyy kokeeseen liittyvät tiedot, kokeeseen liittyvät käyttäjät ja kaikki kokeen time slotit. Tältä sivulta pääsee myös editoimaan koetta tai yksittäistä time slottia, tai luomaan uusia time slotteja. Sivulla voi myös poistaa kokeen tai time slotin. Kokeen poisto varmistetaan erikseen, koska kokeen poistaminen poistaa myös kaikki kokeeseen liittyvät time slotit ja time slottien varaukset. Huomaa, että time slotteja, joissa on varaus (time slottiin liittyvien varausten tiedot saa näkyviin klikkaamalla time slotin tietoja) ei voi editoida. Näin estetään tutkijaa vahingossa siirtämästä varauksen ajankohtaa koehenkilölle ilmoittamatta. Käyttäjän omien time slottien perässä on huomiomerkki “My slot” helpottamaan omien aikojen tunnistamista, jos kokeeseen liittyy paljon muita tutkijoita.

Time slottien luontiin pääsee siis koesivulta valitsemalla laboratorion, alasvetolistasta, tai sitten menemällä Laboratories-sivulle navigaatiopalkin kautta ja sieltä halutun laborotorion sivulle. Laboratoriosivulla on siis laboratorion tietojen lisäksi mahdollisuus luoda kyseiseen laboratorioon liittyviä time slotteja. Tätä helpottamaan sivulla on myös laboratorion kalenteri, jossa näkyvät kaikki laboratorion “sitovat” varaukset. Sitovat varaukset on järjestelmän keskeisimpiä konsepteja. Käytännössä tasan samalla ajalla tai osittain päällekäisellä ajalla voi luoda rajattomasti time slotteja. Vasta, kun time slottiin tulee varsinainen koehenkilö varaus, se muuttuu sitovaksi. Tällöin kaikki muut tämän ajan kanssa lomittuvat/päällekäiset time slotit (joissa ei siis ole varauksia) poistetaan, eli niihin ei voi enää tulla varauksia, eikä tälle ajalle voi myöskään tehdä enää uusia time slotteja. Jos kaksi koehenkilöä on varaamassa samaa slottia samaan aikaan, niin ensimmäisenä varauksen lähettävä saa ajan, koska järjestelmä tarkistaa, onko aika jo varattu (eli onko slotissa vapaita paikkoja). Lisäksi kaikki varaukseen liittyvät muutokset tehdään varmuuden vuoksi transaktion sisällä.

Järjestelmä toimii näin siksi, että vältytään laboratorioiden ylibuukkaamiselta, eli tilanteelta, jossa tutkijat varaavat laboratorioita “varmuuden vuoksi” etukäteen, jos sattuisivat saamaan koehenkilön sille ajalle. Toisaalta tämän järjestelmän ansiosta koehenkilöä ei tarvitse ensin hankkia ja sitten yrittää löytää vapaata sopivaa laboratorioaikaa, vaan järjestelmä ns. pitää itse huolen, ettei ylimääräisiä varauksia tule. Järjestelmään voi toki luoda myös ns. nollavarauksia, eli laittamalla time slotin osallistujamääräksi 0, tehdään tuolle ajalle automaatisesti myös sitova varaus. Nämä ovat sellaisia tilanteita varten, joissa käyttäjä haluaa varata laboratorion esimerkiksi koeasetelman rakentamista tai pilotointia varten. Nämä varaukset esitetään kalenterissa keltaisella, kun koehenkilövaraukset esitetään punaisella. Tämä helpottaa huomaamaan, jos joku varaa laboratoriota huomattavia määriä vain itselleen, sekä helpottaa muiden käyttäjien kanssa ajoista sopimista, koska nollavarauksen siirtäminen todennäköisesti on yksinkertaisempaa kuin koehenkilövarauksen.

Itse time slot luodaan siis yksinkertaisesti valitsemalla päivä, kuukausi, kellonaika, kesto, koe ja osallistujamäärä. Järjestelmä ei anna luoda menneitä aikoja, tai vääriä aikoja (esim. 30.2.). Koska päättymisaikaa ei anneta suoraan, vaan pelkkä kesto, ei päättymisaikaa voi edes laittaa vahingossa ennen alkua. Kun time slot on luotu, käyttäjä ohjataan takaisin laboratoriosivulle, jossa hän saa ilmoituksen, että time slot on luotu onnistuneesti, tai mahdolliset virheet time slotin luomisessa. Järjestelmä täyttää time slotin -luontilomakkeen luodun ajan tiedoilla niin, että se siirtää aloitusaikaa keston verran eteenpäin. Näin on helppo luoda nopeasti useampi peräkkäinen aika. Koska järjestelmässä on mahdollisuus luoda päällekkäisiä ja lomittaisia time slotteja, järjestelmässä on myös mahdollisuus, että käyttäjä luo kaksi täysin identtistä time slottia. Tälle ei välttämättä ole käyttöä, mutta sitä myöskään ole ainakaan toistaiseksi estetty, koska se ei aiheuta järjestelmän toiminnassa häiriötä, korkeintaan sekoittaa aikoja selaavia koehenkilöitä.

Experiments -sivulla on listattuna kaikki järjestelmässä olevat kokeet, ja tämän listauksen kautta käyttäjä voi lisätä itselleen uusia kokeita. Tällä hetkellä se, että käyttäjä ei ole yhdistetty tiettyyn kokeeseen ei vielä rajoita käyttäjän toimia mitenkään, joten hyöty kokeen lisäämisestä on lähinnä kosmeettinen, koska se tarkoittaa vain sitä, että koe tulee käyttäjän etusivulle näkyviin ja että käyttäjän nimi näkyy kokeen sivulla kokeeseen liittyvänä henkilönä. Jos koe on jo liitetty käyttäjään, järjestelmä antaa siitä virheilmoituksen, eikä uutta lisäystä tehdä.

Users-sivulla on listattu kaikki järjestelmässä olevat käyttäjät ja käyttäjää klikkaamalla saa esiin kaikki kyseisen käyttäjän kokeet.
